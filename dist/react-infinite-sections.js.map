{"version":3,"sources":["../src/main.js"],"names":[],"mappings":"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","file":"react-infinite-sections.js","sourcesContent":["import React, {Component} from 'react';\n\nexport default class InfiniteSections extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.dispatcher = new Dispatcher();\n\t}\n\n\trender() {\n\t\tlet {config} = this.props;\n\n\t\treturn (\n\t\t\t<IS\n\t\t\t\tdispatcher={this.dispatcher}\n\t\t\t\tconfig={config(this.dispatcher.dispatch.bind(this.dispatcher))}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nclass IS extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\t...props,\n\t\t\tprevious: null,\n\t\t\tcurrent: null\n\t\t};\n\t\tthis.timeoutId = null;\n\n\t\tthis.props.dispatcher.register((section, id, animation) => {\t\t\t\n\t\t\tthis.getSectionElement(section, id, animation);\n\t\t});\n\n\t\tthis.state.current = this.state.config.root;\n\t}\n\n\tgetSectionElement(section, id, animation) {\t\t\n\t\tlet sectionElement = null;\n\n\t\tif (!animation || !animation.duration || !animation.transform) {\n\t\t\tanimation = false;\n\t\t}\n\n\t\tif (section === 'root') {\n\t\t\tsectionElement = this.state.config.root;\n\t\t} else {\n\t\t\tif (this.state.config.sections) {\n\t\t\t\tif (this.state.config.sections[section] && id) {\n\t\t\t\t\tsectionElement = doGetSection(this.state.config.sections[section], id, this.state.current);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(`Trying to access sections['${section}']' with id ${id}`);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Missing sections object`);\n\t\t\t}\n\t\t}\n\n\t\tclearTimeout(this.timeoutId);\n\t\tthis.setState(Object.assign({}, this.state, {\n\t\t\tprevious: this.state.current,\n\t\t\tcurrent: sectionElement,\n\t\t\tanimation\n\t\t}));\n\t\t\n\n\t\tfunction doGetSection(children, id, fallback) {\n\t\t\tlet result = fallback;\n\n\t\t\tchildren.forEach(child => {\n\t\t\t\tif (child.id === id) {\n\t\t\t\t\tresult = child;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\treturn this.state.previous || nextState.previous;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.state.animation) {\n\t\t\t// Reset current component to original position\n\t\t\tif (!this.state.previous) {\n\t\t\t\tthis.IS.children[0].style['transition'] = `none`;\n\t\t\t\tthis.IS.children[0].style['transform'] = `translate3d(0, 0, 0)`;\n\t\t\t}\n\n\t\t\t// Animation logic\n\t\t\tif (this.state.previous && this.state.current) {\n\t\t\t\tfor (let i = 0; i < this.IS.children.length; i++) {\n\t\t\t\t\tif (this.state.animation && this.state.animation.flip) {\n\t\t\t\t\t\tthis.IS.children[i].style['transform'] = 'translate3d(-100%, 0, 0)';\n\t\t\t\t\t}\n\n\t\t\t\t\tonNextFrame(() => {\n\t\t\t\t\t\tthis.IS.children[i].style['transition'] = `all ${this.state.animation.duration}ms ease`;\n\t\t\t\t\t\tthis.IS.children[i].style['transform'] = this.state.animation.transform;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If animation is enabled this function will\n\t\t// execute after the animation is done\n\t\tthis.timeoutId = setTimeout(() => {\n\t\t\tthis.setState(Object.assign({}, this.state, {\n\t\t\t\tprevious: null\n\t\t\t}));\n\t\t}, this.state.animation ? this.state.animation.duration : 0);\n\t}\n\n\trender() { \n\t\tlet previous = this.state.previous && this.state.previous.component;\n\t\tlet current = this.state.current.component;\n\t\tlet content = null;\n\n\t\t// Checking if animation is enabled\n\t\tif (this.state.animation) {\n\t\t\t// Checking if navigatining to parent (flip)\n\t\t\tif (this.state.animation.flip) {\n\t\t\t\tcontent = (\n\t\t\t\t\t<div style={{overflow: 'visible', whiteSpace: 'nowrap', overflow: 'hidden'}} ref={ref => this.IS = ref}>\n\t\t\t\t\t\t{current}\n\t\t\t\t\t\t{previous}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontent = (\n\t\t\t\t\t<div style={{overflow: 'visible', whiteSpace: 'nowrap', overflow: 'hidden'}} ref={ref => this.IS = ref}>\n\t\t\t\t\t\t{previous}\n\t\t\t\t\t\t{current}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tcontent = (\n\t\t\t\t<div style={{overflow: 'visible', whiteSpace: 'nowrap', overflow: 'hidden'}} ref={ref => this.IS = ref}>\n\t\t\t\t\t{current}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (content);\n\t}\n}\n\nclass Dispatcher {\n\tconstructor() {\n\t\tthis.callback = null;\n\t}\n\n\tregister(callback) {\n\t\tthis.callback = callback;\n\t}\n\n\tdispatch(section, id, animation) {\n\t\treturn () => {\n\t\t\tthis.callback(section, id, animation);\n\t\t}\n\t}\n}\n\nfunction onNextFrame(callback) {\n    setTimeout(() => {\n        window.requestAnimationFrame(callback);\n    }, 20);\n}"]}